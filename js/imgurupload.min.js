!function(e){"use strict";var i=[],t=function(e,i){var t,n,a;i+="\n",document.selection?(e.focus(),t=document.selection.createRange(),t.text=i):e.selectionStart||"0"==e.selectionStart?(n=e.selectionStart,a=e.selectionEnd,e.value=e.value.substring(0,n)+i+e.value.substring(a,e.value.length)):e.value+=i},n=function(i){var t,n,a=i.link.replace(/^http:/i,"https:"),o="1"===gdn.definition("resizeimages")&&1===gdn.definition("imgurthumbnailsuffix").length,r=e("#Form_Format").val();switch(o&&(n=a.split("."),n[n.length-2]+=gdn.definition("imgurthumbnailsuffix"),n=n.join(".")),r.toLowerCase()){case"bbcode":t=o?"[url="+a+"][img]"+n+"[/img][/url]":"[img]"+a+"[/img]";break;case"markdown":t=o?"[![]("+n+")]("+a+")":"![]("+a+")";break;case"html":t=o?'<a href="'+a+'" target="_new"><img src="'+n+'" alt="" /></a>':'<img src="'+a+'" alt="" width="'+i.width+'" height="'+i.height+'" />';break;default:t=a}return t},a=function(e,i,a){return{init:function(){this.on("error",function(e,i){i.indexOf("File is too big")>-1&&(i="File <strong>"+e.name+"</strong> is too large at "+Math.round(e.size/1024/1024*100)/100+"MB. Max filesize is 10MB."),gdn.informError(i),this.removeFile(e)})},sending:function(){e.prop("disabled",!0)},queuecomplete:function(){e.prop("disabled",!1)},success:function(i,a){a.success?t(e[0],n(a.data)):gdn.informError("Something went wrong while uploading your images. Our image host, imgur.com, may be having technical issues. Please try again in a few minutes.")},autoQueue:!0,acceptedFiles:"image/*",paramName:"image",clickable:a,method:"post",maxFilesize:10,maxFiles:20,previewsContainer:i[0],thumbnailWidth:60,thumbnailHeight:60,fallback:function(){},url:"https://api.imgur.com/3/upload",headers:{Authorization:"Client-ID "+gdn.definition("imgurclientid"),Accept:"application/json"}}},o=function(o){var r,s=o.parents("form"),l=-1,u=s.find("[type=submit]").last(),c=e("<div/>",{class:"imguruploader-preview-ctx"});o.length&&(o.attr("placeholder","You can now drag and drop images here to add them to your post! They will appear wherever your caret is."),o.after(c),"1"===gdn.definition("enabledragdrop")&&(i.push(new Dropzone(o[0],a(o,c,!1))),l=i.length-1),("ontouchstart"in window||"1"===gdn.definition("showimagesbtn"))&&(o.attr("placeholder",""),r=e('<a href="#" class="Button ButtonAddImages">Add Images</a>').on("click",function(e){e.preventDefault()}),u.before(r),i.push(new Dropzone(r[0],a(o,c,!0)))),u.on("click",function(){c.empty()}),l>-1&&o.on("paste",function(e){var t,n=e.originalEvent.clipboardData.items;for(t=0;t<n.length;t++)"file"===n[t].kind&&n[t].type.indexOf("image/")>-1&&i[l].addFile(n[t].getAsFile())}),"1"===gdn.definition("processimageurls")&&o.on("drop",function(e){var i=e.originalEvent.dataTransfer.getData("URL");i.length&&(e.preventDefault(),e.stopPropagation(),i.match(/([a-z\-_0-9\/\:\.]*\.(jpg|jpeg|png|gif))/i)?t(o[0],n({link:i})):t(o[0],i))}))};e(function(){o(e("#Form_Body")),e(document).on("EditCommentFormLoaded",function(i,t){t.find(".EditCommentForm").find("textarea").each(function(){o(e(this))})})})}(jQuery);
//# sourceMappingURL=imgurupload.js.map