!function(e){"use strict";var t=function(e,t){var i,a,n;t+="\n",document.selection?(e.focus(),i=document.selection.createRange(),i.text=t):e.selectionStart||"0"==e.selectionStart?(a=e.selectionStart,n=e.selectionEnd,e.value=e.value.substring(0,a)+t+e.value.substring(n,e.value.length)):e.value+=t},i=function(t){var i,a,n=t.link.replace(/^http:/i,"https:"),o="1"===gdn.definition("resizeimages"),r=e("#Form_Format").val();switch(o&&(a=n.split("."),a[a.length-2]+="h",a=a.join(".")),r.toLowerCase()){case"bbcode":i=o?"[url="+n+"][img]"+a+"[/img][/url]":"[img]"+n+"[/img]";break;case"markdown":i=o?"[![]("+a+")]("+n+")":"![]("+n+")";break;case"html":i=o?'<a href="'+n+'" target="_new"><img src="'+a+'" alt="" /></a>':'<img src="'+n+'" alt="" width="'+t.width+'" height="'+t.height+'" />';break;default:i=n}return i},a=function(e,a,n){return{sending:function(){e.prop("disabled",!0)},queuecomplete:function(){e.prop("disabled",!1)},success:function(a,n){n.success?t(e[0],i(n.data)):alert("Something went wrong trying to upload your images :( \n\nOur image host, imgur.com, may be having technical issues. Give it a few minutes and try again.")},acceptedFiles:"image/*",paramName:"image",clickable:n,method:"post",maxFilesize:20,maxFiles:20,previewsContainer:a[0],thumbnailWidth:60,thumbnailHeight:60,fallback:function(){},url:"https://api.imgur.com/3/upload",headers:{Authorization:"Client-ID "+gdn.definition("imgurclientid"),Accept:"application/json"}}};e(function(){var n,o,r=e("#Form_Body"),l=r.parents("form"),s=l.find("[type=submit]").last(),c=e("<div/>",{class:"imguruploader-preview-ctx"});r.length&&(r.attr("placeholder","You can now drag and drop images here to add them to your post! They will appear wherever your caret is."),r.after(c),n=new Dropzone(r[0],a(r,c,!1)),"ontouchstart"in window&&(r.attr("placeholder",""),o=e('<a href="#" class="Button ButtonAddImages">Add Images</a>').on("click",function(e){e.preventDefault()}),s.before(o),o.dropzone(a(r,c,!0))),s.on("click",function(){c.empty()}),r.on("paste",function(e){var t,i=e.originalEvent.clipboardData.items;for(t=0;t<i.length;t++)"file"===i[t].kind&&i[t].type.indexOf("image/")>-1&&n.addFile(i[t].getAsFile())}),"1"===gdn.definition("processimageurls")&&r.on("drop",function(e){var a=e.originalEvent.dataTransfer.getData("URL");a.length&&(e.preventDefault(),e.stopPropagation(),a.match(/([a-z\-_0-9\/\:\.]*\.(jpg|jpeg|png|gif))/i)?t(r[0],i({link:a})):t(r[0],a))}))})}(jQuery);
//# sourceMappingURL=imgurupload.js.map