!function(e){"use strict";var t=[],i=function(e,t){var i,n,a;t+="\n",document.selection?(e.focus(),i=document.selection.createRange(),i.text=t):e.selectionStart||"0"==e.selectionStart?(n=e.selectionStart,a=e.selectionEnd,e.value=e.value.substring(0,n)+t+e.value.substring(a,e.value.length)):e.value+=t},n=function(t){var i,n,a=t.link.replace(/^http:/i,"https:"),o="1"===gdn.definition("resizeimages")&&1===gdn.definition("imgurthumbnailsuffix").length,r=e("#Form_Format").val();switch(o&&(n=a.split("."),n[n.length-2]+=gdn.definition("imgurthumbnailsuffix"),n=n.join(".")),r.toLowerCase()){case"bbcode":i=o?"[url="+a+"][img]"+n+"[/img][/url]":"[img]"+a+"[/img]";break;case"markdown":i=o?"[![]("+n+")]("+a+")":"![]("+a+")";break;case"html":i=o?'<a href="'+a+'" target="_new"><img src="'+n+'" alt="" /></a>':'<img src="'+a+'" alt="" width="'+t.width+'" height="'+t.height+'" />';break;default:i=a}return i},a=function(e,t,a){return{sending:function(){e.prop("disabled",!0)},queuecomplete:function(){e.prop("disabled",!1)},success:function(t,a){a.success?i(e[0],n(a.data)):alert("Something went wrong trying to upload your images :( \n\nOur image host, imgur.com, may be having technical issues. Give it a few minutes and try again.")},autoQueue:!0,acceptedFiles:"image/*",paramName:"image",clickable:a,method:"post",maxFilesize:20,maxFiles:20,previewsContainer:t[0],thumbnailWidth:60,thumbnailHeight:60,fallback:function(){},url:"https://api.imgur.com/3/upload",headers:{Authorization:"Client-ID "+gdn.definition("imgurclientid"),Accept:"application/json"}}},o=function(o){var r,s=o.parents("form"),u=-1,l=s.find("[type=submit]").last(),c=e("<div/>",{class:"imguruploader-preview-ctx"});o.length&&(o.attr("placeholder","You can now drag and drop images here to add them to your post! They will appear wherever your caret is."),o.after(c),"1"===gdn.definition("enabledragdrop")&&(t.push(new Dropzone(o[0],a(o,c,!1))),u=t.length-1),("ontouchstart"in window||"1"===gdn.definition("showimagesbtn"))&&(o.attr("placeholder",""),r=e('<a href="#" class="Button ButtonAddImages">Add Images</a>').on("click",function(e){e.preventDefault()}),l.before(r),t.push(new Dropzone(r[0],a(o,c,!0)))),l.on("click",function(){c.empty()}),u>-1&&o.on("paste",function(e){var i,n=e.originalEvent.clipboardData.items;for(i=0;i<n.length;i++)"file"===n[i].kind&&n[i].type.indexOf("image/")>-1&&t[u].addFile(n[i].getAsFile())}),"1"===gdn.definition("processimageurls")&&o.on("drop",function(e){var t=e.originalEvent.dataTransfer.getData("URL");t.length&&(e.preventDefault(),e.stopPropagation(),t.match(/([a-z\-_0-9\/\:\.]*\.(jpg|jpeg|png|gif))/i)?i(o[0],n({link:t})):i(o[0],t))}))};e(function(){o(e("#Form_Body")),e(document).on("EditCommentFormLoaded",function(){e(".EditCommentForm").find("textarea").each(function(){o(e(this))})})})}(jQuery);
//# sourceMappingURL=imgurupload.js.map